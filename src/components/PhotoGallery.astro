---
import { Image } from 'astro:assets';

export interface Props {
  fotoItems: any[];
}
const { fotoItems } = Astro.props;
---

<div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
  {fotoItems.map((photo, index) => (
    <a 
      href={photo.lightboxSrc} 
      class="glightbox group block w-full overflow-hidden rounded-lg shadow-md aspect-video" 
      data-gallery="gallery-dusun"
      data-aos="zoom-in" 
      data-aos-delay={100 + index * 50}
    >
      <Image 
        src={photo.originalSrc()} 
        alt={photo.alt}
        width="400"
        height="225" 
        densities={[1.5, 2]}
        class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"
      />
    </a>
  ))}
</div>

<script>
  // 2. Impor GLightbox dan CSS-nya tetap di sini.
  // Astro sekarang akan mem-bundle keduanya dengan benar.
  import GLightbox from 'glightbox';
  import 'glightbox/dist/css/glightbox.min.css';

  const lightbox = GLightbox({
    selector: '.glightbox',
    touchNavigation: true,
    loop: true,
    openEffect: 'zoom',
    closeEffect: 'fade',
  });
</script>