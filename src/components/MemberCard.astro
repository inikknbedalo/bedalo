---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

type ImageGlob = Record<string, () => Promise<{ default: ImageMetadata }>>;

export interface Props {
  member: {
    fotoUrl: string;
    nama: string;
    prodi: string;
    instagramUrl?: string;
  };
  allImages: ImageGlob;
}
const { member, allImages } = Astro.props;

const imagePath = Object.keys(allImages).find(path => path.endsWith(member.fotoUrl));
---

{member.instagramUrl ? (
  <a 
    href={member.instagramUrl} 
    target="_blank" 
    rel="noopener noreferrer" 
    class="flex items-center gap-4 bg-white p-4 rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all duration-300"
  >
    {imagePath ? (
      <Image
        src={allImages[imagePath]()}
        alt={`Foto ${member.nama}`}
        width="80"
        height="80"
        class="w-20 h-20 rounded-lg object-cover flex-shrink-0 border-2 border-gray-100"
      />
    ) : <div class="w-20 h-20 rounded-lg bg-gray-200 flex-shrink-0"></div>}
    <div class="text-left">
      <h4 class="font-bold text-lg text-gray-800 leading-tight">{member.nama}</h4>
      <p class="text-gray-500 text-sm">{member.prodi}</p>
    </div>
  </a>
) : (
  <div class="flex items-center gap-4 bg-white p-4 rounded-lg shadow-md">
    {imagePath ? (
      <Image
        src={allImages[imagePath]()}
        alt={`Foto ${member.nama}`}
        width="80"
        height="80"
        class="w-20 h-20 rounded-lg object-cover flex-shrink-0 border-2 border-gray-100"
      />
    ) : <div class="w-20 h-20 rounded-lg bg-gray-200 flex-shrink-0"></div>}
    <div class="text-left">
      <h4 class="font-bold text-lg text-gray-800 leading-tight">{member.nama}</h4>
      <p class="text-gray-500 text-sm">{member.prodi}</p>
    </div>
  </div>
)}